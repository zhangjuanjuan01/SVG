<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        html,body{
            width: 100%;height: 100%;
        }
        select{
            width: 100px;
            height:25px;
            line-height: 25px;
        }
        p{
            width: 100%;
            background-color:#CCC;
            color:white;
            font-size:16px;
            font-weight: 500;
            height:30px;
            line-height: 30px;
        }
        label{
            width: 30px;
            display: inline-block;
            text-align: right;
        }
        .change label{
            width: 60px;
        }
        .change input {
            width: 130px;
        }
    </style>
</head>
<body>
    <div style="width: 1000px;margin: 0 auto;height:100%;border:1px solid #CCC;padding: 10px;" id="mod-main-container">
        <div style="width: 200px;float:left">
            <div class="attribute-editor">
                <p>属性编辑</p>
                <div data-type="rect">
                    <label>X</label><input type="range" min="0" max="500" name="x"><label>0</label>
                    <label>Y</label><input type="range" min="0" max="500" name="y"><label>0</label>
                    <label>RX</label><input type="range" min="0" max="500" name="rx"><label>0</label>
                    <label>RY</label><input type="range" min="0" max="500" name="ry"><label>0</label>
                    <label>WIDTH</label><input type="range" min="0" max="500" name="width"><label>0</label>
                    <label>HEIGHT</label><input type="range" min="0" max="500" name="height"><label>0</label>
                </div>
                <div data-type="circle" style="display: none">
                    <label>CX</label><input type="range" min="0" max="500" name="cx"><label>0</label>
                    <label>CY</label><input type="range" min="0" max="500" name="cy"><label>0</label>
                    <label>R</label><input type="range" min="0" max="500" name="r"><label>0</label>
                </div>
                <div data-type="line" style="display: none">
                    <label>X1</label><input type="range" min="0" max="500" name="x1"><label>0</label>
                    <label>Y1</label><input type="range" min="0" max="500" name="y1"><label>0</label>
                    <label>X2</label><input type="range" min="0" max="500" name="x2"><label>0</label>
                    <label>Y2</label><input type="range" min="0" max="500" name="y2"><label>0</label>
                </div>
                <div data-type="ellipse" style="display: none">
                    <label>CX</label><input type="range" min="0" max="500" name="cx"><label>0</label>
                    <label>CY</label><input type="range" min="0" max="500" name="cy"><label>0</label>
                    <label>RX</label><input type="range" min="0" max="500" name="rx"><label>0</label>
                    <label>RY</label><input type="range" min="0" max="500" name="ry"><label>0</label>
                </div>
                <div data-type="POLYGON" style="display: none">
                    <label>CX</label><input type="range" min="0" max="500" name="cx"><label>0</label>
                    <label>CY</label><input type="range" min="0" max="500" name="cy"><label>0</label>
                    <label>RX</label><input type="range" min="0" max="500" name="rx"><label>0</label>
                    <label>RY</label><input type="range" min="0" max="500" name="ry"><label>0</label>
                </div>
            </div>
            <div class="change">
                <p>图形变换</p>
                    <label>fill</label><input type="color" name="fill"><br/>
                    <label>stroke</label><input type="color" name="stroke"><br/>
                    <label>stroke-width</label><input type="range" name="stroke-width">
            </div>
        </div>
        <div style="width:600px;float:left;margin:20px;box-shadow:2px 2px 10px rgba(0,0,0,.4)">
            <svg id="shape-svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="500" height="500">
                <rect x="10" y="10" width="100" height="100" rx="10" ry="10" fill="#FFFFFF" stroke="#FF0000" stroke-width="1"></rect>
                <circle cx="200" cy="200" r="50" fill="#FFFFFF" stroke="#FF0000" stroke-width="1"></circle>
                <line x1="300" y1="300" x2="500" y2="250" fill="#FFFFFF" stroke="#FF0000" stroke-width="3"></line>
                <ellipse cx="400" cy="400" rx="50" ry="100" fill="#FFFFFF" stroke="#FF0000" stroke-width="1"></ellipse>
            </svg>
        </div>
    </div>
</body>
<script src="../lib/jquery.min.js"></script>
<script>
    var modEle = $("#mod-main-container");
    var svgEle = $("#shape-svg");
    var selectedShape;
    bindEvent();
    function bindEvent() {
        modEle.delegate('input[type="range"],input[type="color"]',"input",function () {
            if(!selectedShape){
                alert("请先选择图形");
                return false;
            }
            var $this = $(this);
            selectedShape.attr($this.attr("name"),$this.val());
            $this.next().html($this.val());
        }).delegate("rect,circle,line,ellipse","click",function () {
            var $this = $(this);
            selectedShape = $(this);
            var tagName = $this[0].tagName;
            modEle.find('div[data-type="'+tagName+'"]').show().siblings("div").hide();
            modEle.find('div[data-type="'+tagName+'"]').children("input").each(function () {
                var value = $this.attr($(this).attr("name"));
                $(this).val(value).next().html(value);
            });
            $(".change").children("input").each(function () {
                var value = $this.attr($(this).attr("name"));
                $(this).val(value);
            })
        })
    }
</script>
</html>